<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>ì¶œíŒì—”ì§€ë‹ˆì–´ì˜ EPUB í‘œì¤€ ì „ìì±…/ì œì‘ ì˜ë¢° ë° ìë™ê²¬ì ì„œ (Soft UI)</title>
    <link rel="stylesheet" as="style" crossorigin="anonymous" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        /* [ë””ìì¸ í…Œë§ˆ: ë‰´ëª¨í”¼ì¦˜ (Soft UI)] */
        * { box-sizing: border-box; }
        :root {
            --primary-color: #6d5dfc; /* í¬ì¸íŠ¸: ì†Œí”„íŠ¸ í¼í”Œ */
            --bg-color: #e4ebf5;      /* ë² ì´ìŠ¤: ë¸”ë£¨ ê·¸ë ˆì´ */
            --text-main: #44476a;
            --text-sub: #7c8594;
            --shadow-light: #ffffff;
            --shadow-dark: #c8d0e7;
            --border-radius: 20px;
            --price-color: #e63946;
        }
        body {
            font-family: "Pretendard", sans-serif;
            color: var(--text-main);
            background: var(--bg-color);
            margin: 0;
            padding: 40px 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            overflow-y: scroll; /* íƒ­ ì „í™˜ ì‹œ ìŠ¤í¬ë¡¤ë°” ìœ ë¬´ë¡œ ì¸í•œ ë„ˆë¹„ ë³€í™” ë°©ì§€ */
        }
        .container {
            width: 100%;
            max-width: 720px;
            background: var(--bg-color);
            border-radius: 30px;
            /* ë¶€ë“œëŸ¬ìš´ ëŒì¶œ íš¨ê³¼ */
            box-shadow: 
                20px 20px 60px var(--shadow-dark), 
                -20px -20px 60px var(--shadow-light);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            min-height: 85vh;
            border: none;
        }
        
        /* Header */
        header {
            background: var(--bg-color);
            padding: 40px 40px 25px;
            color: var(--primary-color);
            text-align: center;
            border-bottom: 1px solid rgba(0,0,0,0.02);
        }
        header h1 { 
            margin: 0; font-size: 26px; font-weight: 800; letter-spacing: -0.5px; 
            /* í…ìŠ¤íŠ¸ì—ë„ ì…ì²´ê° ë¶€ì—¬ */
            text-shadow: 2px 2px 4px var(--shadow-dark), -2px -2px 4px var(--shadow-light);
        }
        header p { margin: 10px 0 0; opacity: 0.8; font-size: 15px; color: var(--text-sub); }

        /* Tabs */
        .tab-nav { 
            display: flex; 
            background: var(--bg-color); 
            padding: 15px 40px 0; 
            gap: 15px;
            border-bottom: none;
        }
        .tab-btn {
            flex: 1; padding: 15px; border: none; background: transparent;
            font-size: 16px; font-weight: 700; color: var(--text-sub);
            cursor: pointer; transition: all 0.3s;
            border-radius: 12px 12px 0 0;
        }
        .tab-btn.active { 
            color: var(--primary-color); 
            font-weight: 800; 
            background: var(--bg-color);
            /* íƒ­ í™œì„±í™” ì‹œ ëŒì¶œ */
            box-shadow: 
                5px 5px 10px var(--shadow-dark), 
                -5px -5px 10px var(--shadow-light);
        }
        
        /* Sliding Tab Line - ë‰´ëª¨í”¼ì¦˜ì—ì„œëŠ” ì œê±° */
        .tab-line { display: none; }

        /* Content */
        .tab-content { 
            display: none; padding: 40px; animation: fadeIn 0.4s ease-out; flex: 1; 
            background: var(--bg-color); 
        }
        .tab-content.active { display: flex; flex-direction: column; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } } /* ìœ„ì¹˜ ì´ë™ ì œê±°í•˜ì—¬ í”ë“¤ë¦¼ ë°©ì§€ */

        /* Card-Based UI Forms */
        .form-group { 
            background: var(--bg-color);
            padding: 25px;
            border-radius: var(--border-radius);
            margin-bottom: 25px;
            /* ì¹´ë“œ ëŒì¶œ íš¨ê³¼ */
            box-shadow: 
                8px 8px 16px var(--shadow-dark), 
                -8px -8px 16px var(--shadow-light);
            border: none;
            transition: transform 0.2s;
        }
        .form-group:hover {
            transform: translateY(-2px);
        }
        
        .form-label { display: block; font-weight: 700; margin-bottom: 15px; font-size: 17px; color: var(--text-main); }
        
        /* Inputs (Inset Style) */
        .form-input, .form-select, .form-textarea {
            width: 100%; padding: 14px; 
            border: none;
            background: var(--bg-color);
            border-radius: 12px; font-size: 16px;
            transition: all 0.2s;
            /* ì•ˆìª½ìœ¼ë¡œ íŒŒì¸ íš¨ê³¼ (Inset) */
            box-shadow: inset 4px 4px 8px var(--shadow-dark), inset -4px -4px 8px var(--shadow-light);
            color: var(--text-main);
        }
        .form-textarea { resize: vertical; min-height: 80px; }
        
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            /* í¬ì»¤ìŠ¤ ì‹œ ë” ê¹Šê²Œ íŒŒì¸ ëŠë‚Œ + ê¸€ë¡œìš° */
            box-shadow: inset 2px 2px 4px var(--shadow-dark), inset -2px -2px 4px var(--shadow-light), 0 0 5px rgba(109, 93, 252, 0.1);
            color: var(--primary-color);
        }
        .form-select.is-selected {
            color: var(--primary-color);
            font-weight: 700;
        }
        
        /* Quote Section */
        .quote-box {
            background: var(--bg-color);
            border-radius: var(--border-radius);
            border: none;
            /* ê²¬ì  ë°•ìŠ¤ëŠ” ì•ˆìª½ìœ¼ë¡œ íŒŒì¸ í˜•íƒœë¡œ ì°¨ë³„í™” */
            box-shadow: 
                inset 6px 6px 12px var(--shadow-dark), 
                inset -6px -6px 12px var(--shadow-light);
            padding: 30px; 
            margin-top: 30px;
        }
        .quote-row {
            display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 16px;
            color: var(--text-sub);
        }
        .quote-row span:last-child { color: var(--text-main); font-weight: 600; }

        .quote-total {
            border-top: 1px solid rgba(163, 177, 198, 0.3); padding-top: 15px; margin-top: 15px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .total-price { font-size: 24px; font-weight: 800; color: var(--price-color); text-shadow: 1px 1px 2px var(--shadow-dark); }

        /* Checkbox Card */
        .checkbox-group { display: flex; flex-direction: column; gap: 15px; }
        .checkbox-card {
            display: flex; flex-direction: column; align-items: flex-start; padding: 15px;
            border-radius: 12px; cursor: pointer;
            background: var(--bg-color);
            box-shadow: 
                5px 5px 10px var(--shadow-dark), 
                -5px -5px 10px var(--shadow-light);
            border: none;
            transition: 0.2s;
        }
        .checkbox-card:active {
            /* í´ë¦­ ì‹œ ëˆŒë¦¬ëŠ” íš¨ê³¼ */
            box-shadow: inset 3px 3px 6px var(--shadow-dark), inset -3px -3px 6px var(--shadow-light);
        }
        .checkbox-row { display: flex; align-items: center; width: 100%; }
        
        /* ì»¤ìŠ¤í…€ ì²´í¬ë°•ìŠ¤ */
        .checkbox-row input { 
            margin-right: 12px; 
            appearance: none; width: 24px; height: 24px; border-radius: 50%;
            background: var(--bg-color);
            box-shadow: 
                3px 3px 6px var(--shadow-dark), 
                -3px -3px 6px var(--shadow-light);
            display: grid; place-content: center;
            cursor: pointer;
        }
        .checkbox-row input::before {
            content: ""; width: 12px; height: 12px; border-radius: 50%;
            background: var(--primary-color);
            transform: scale(0); transition: 0.2s;
        }
        .checkbox-row input:checked::before { transform: scale(1); }
        .checkbox-desc { font-size: 14px; color: var(--text-sub); margin-left: 36px; margin-top: 4px; }

        /* Buttons */
        .btn-area { margin-top: 60px; margin-bottom: 40px; }
        .btn-next {
            width: 100%; padding: 14px; 
            background: var(--bg-color); color: var(--text-main);
            border: none; border-radius: 50px; font-weight: 700; cursor: pointer;
            box-shadow: 
                6px 6px 12px var(--shadow-dark), 
                -6px -6px 12px var(--shadow-light);
            transition: 0.2s;
        }
        .btn-next:active {
            box-shadow: inset 4px 4px 8px var(--shadow-dark), inset -4px -4px 8px var(--shadow-light);
        }

        .btn-submit {
            width: 100%; padding: 16px; 
            background: var(--primary-color); color: white;
            border: none; border-radius: 50px; font-weight: 700; cursor: pointer;
            font-size: 16px; 
            box-shadow: 
                6px 6px 12px rgba(109, 93, 252, 0.4), 
                -6px -6px 12px var(--shadow-light);
            transition: 0.2s;
        }
        .btn-submit:hover { transform: translateY(-2px); }
        .btn-submit:active { transform: translateY(0); box-shadow: inset 3px 3px 6px rgba(0,0,0,0.2); }

        /* Modal */
        .modal-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(228, 235, 245, 0.8); /* Glassy bg */
            backdrop-filter: blur(5px);
            z-index: 9999;
            display: none;
        }
        .modal-overlay.visible { display: block; animation: fadeInBg 0.2s ease-out forwards; }
        .modal-box {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            background: var(--bg-color); padding: 30px; border-radius: 30px; width: 90%; max-width: 360px; text-align: center;
            box-shadow: 
                20px 20px 60px var(--shadow-dark), 
                -20px -20px 60px var(--shadow-light);
            border: none;
        }
        .modal-btn {
            background: var(--bg-color); color: var(--primary-color); border: none; padding: 12px; width: 100%;
            border-radius: 50px; font-weight: 700; cursor: pointer; margin-top: 15px;
            box-shadow: 
                5px 5px 10px var(--shadow-dark), 
                -5px -5px 10px var(--shadow-light);
        }
        .modal-btn:active { box-shadow: inset 3px 3px 6px var(--shadow-dark), inset -3px -3px 6px var(--shadow-light); }

        /* Color Picker & Preview Styles */
        .picker-item { 
            display: flex; align-items: center; justify-content: space-between; padding: 14px; 
            border-radius: 12px; background: var(--bg-color); margin-bottom: 15px; 
            /* íŒŒì¸ íš¨ê³¼ */
            box-shadow: inset 3px 3px 6px var(--shadow-dark), inset -3px -3px 6px var(--shadow-light);
            border: none;
        }
        .picker-info { flex: 1; }
        .picker-label { font-weight: 700; font-size: 16px; display: block; color: var(--text-main); }
        .picker-desc { font-size: 13px; color: var(--text-sub); margin-top: 2px; }
        input[type="color"] { 
            -webkit-appearance: none; appearance: none; border: none; width: 45px; height: 45px; cursor: pointer; background: none; padding: 0; 
        }
        input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
        input[type="color"]::-webkit-color-swatch { 
            border: 2px solid var(--bg-color); border-radius: 50%; 
            box-shadow: 3px 3px 6px var(--shadow-dark), -3px -3px 6px var(--shadow-light);
        }

        .preview-box { 
            border-radius: 20px; margin-top: 50px; margin-bottom: 50px; text-align: center; padding: 50px 30px; 
            display: flex; flex-direction: column; justify-content: center; align-items: center; 
            background-color: var(--bg-color); 
            box-shadow: 
                8px 8px 16px var(--shadow-dark), 
                -8px -8px 16px var(--shadow-light);
            border: none;
            transition: background 0.3s; 
        }
        .chapter-num { font-size: 12px; font-weight: 700; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 8px; }
        .chapter-title { font-size: 24px; font-weight: 800; margin: 0 0 15px 0; line-height: 1.3; }
        .divider-line { width: 30px; height: 3px; margin: 0 auto 20px; border-radius: 2px; }
        .point-icon { font-size: 20px; margin-bottom: 15px; }
        .quote-text { font-size: 16px; font-style: italic; margin-bottom: 20px; font-weight: 500; }
        .body-text { font-size: 15px; line-height: 1.7; color: var(--text-main); text-align: justify; max-width: 100%; }

        /* Bookstore Buttons */
        .store-links { margin-bottom: 12px; display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }
        .store-btn {
            padding: 8px 16px; background: var(--bg-color); border: none; border-radius: 20px;
            font-size: 12px; font-weight: 600; text-decoration: none; transition: all 0.2s; display: flex; align-items: center;
            box-shadow: 
                4px 4px 8px var(--shadow-dark), 
                -4px -4px 8px var(--shadow-light);
            color: var(--text-sub);
        }
        .store-btn:hover { transform: translateY(-1px); color: var(--primary-color); }
        .store-btn:active { box-shadow: inset 2px 2px 4px var(--shadow-dark), inset -2px -2px 4px var(--shadow-light); transform: translateY(0); }
        
        /* Footer */
        .app-footer {
            text-align: center; padding: 20px; border-top: none;
            color: var(--text-sub); font-size: 13px; background: var(--bg-color); margin-top: auto;
            box-shadow: inset 0 10px 20px -10px var(--shadow-dark);
        }

        /* Accordion Animation */
        #counterBox { 
            max-height: 0; overflow: hidden; opacity: 0; transition: all 0.4s ease; margin-top: 0; 
            border-radius: 12px;
        }
        #counterBox.active { max-height: 500px; opacity: 1; margin-top: 15px; padding: 15px; box-shadow: inset 4px 4px 8px var(--shadow-dark), inset -4px -4px 8px var(--shadow-light); }
        #counterArrow { display: inline-block; transition: transform 0.3s ease; }
        #counterArrow.active { transform: rotate(180deg); }

        @media (max-width: 768px) {
            body { padding: 0; }
            .container { border-radius: 0; box-shadow: none; }
            .tab-content { padding: 30px 20px; }
            header { padding: 30px 20px; }
            .tab-nav { padding: 15px 20px 0; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>ğŸ“š ì¶œíŒì—”ì§€ë‹ˆì–´ì˜ EPUB í‘œì¤€ ì „ìì±…<br>ì œì‘ ì˜ë¢° ë° ìë™ê²¬ì ì„œ</h1>
        <p>ì›ê³  ìƒíƒœì™€ ì œì‘ ìœ í˜•ì„ ì„ íƒí•˜ë©´ ê²¬ì ì´ ê³„ì‚°ë©ë‹ˆë‹¤.</p>
    </header>

    <div id="quoteForm">

    <div class="tab-nav">
        <button type="button" class="tab-btn active" onclick="openTab('tab1')" data-tab="tab1">1. ì±… ì •ë³´</button>
        <button type="button" class="tab-btn" onclick="openTab('tab2')" data-tab="tab2">2. ë””ìì¸</button>
        <button type="button" class="tab-btn" onclick="openTab('tab3')" data-tab="tab3">3. ê²¬ì  í™•ì¸</button>
        <div class="tab-line"></div>
    </div>

    <!-- TAB 1: ì±… ì •ë³´ -->
    <div id="tab1" class="tab-content active">
        <div class="form-group">
            <label class="form-label">Q. ì±…ì˜ ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš” (ë¯¸ì •ì‹œ ê°€ì œëª©)</label>
            <input type="text" id="title" name="title" class="form-input" placeholder="ì˜ˆ: ì§ì¥ì¸ ì¬í…Œí¬ ë…¸í•˜ìš°">
        </div>
        <div class="form-group">
            <label class="form-label">Q. ì±…ì˜ ëŒ€ëµì ì¸ ì¹´í…Œê³ ë¦¬ëŠ” ë¬´ì—‡ì¸ê°€ìš”?</label>
            <select id="category" name="category" class="form-select">
                <option value="" selected disabled hidden>ì„ íƒí•´ì£¼ì„¸ìš”</option>
                <option value="ì†Œì„¤/ì—ì„¸ì´ (ë¬¸í•™)">ì†Œì„¤/ì—ì„¸ì´ (ë¬¸í•™)</option>
                <option value="ê²½ì œ/ê²½ì˜/ìê¸°ê³„ë°œ">ê²½ì œ/ê²½ì˜/ìê¸°ê³„ë°œ</option>
                <option value="ì¸ë¬¸/ì‚¬íšŒ/ì—­ì‚¬">ì¸ë¬¸/ì‚¬íšŒ/ì—­ì‚¬</option>
                <option value="ì‹¤ìš©/ì·¨ë¯¸/ê±´ê°•">ì‹¤ìš©/ì·¨ë¯¸/ê±´ê°•</option>
                <option value="ê¸°íƒ€">ê¸°íƒ€</option>
            </select>
        </div>
        <div class="form-group">
            <label class="form-label">Q. ì›ê³ ëŠ” ì–´ë–¤ íŒŒì¼ë¡œ ì‘ì„±í•˜ì…¨ë‚˜ìš”?</label>
            <select id="manuscriptType" name="manuscript_type" class="form-select">
                <option value="" selected disabled hidden>ì„ íƒí•´ì£¼ì„¸ìš”</option>
                <option value="ì›Œë“œ">ì›Œë“œ (.docx)</option>
                <option value="í•œê¸€">í•œê¸€ (.hwp)</option>
                <option value="ë©”ëª¨">ë©”ëª¨/í…ìŠ¤íŠ¸ (.txt)</option>
                <option value="PDF">PDF (í…ìŠ¤íŠ¸ ì¶”ì¶œ ê°€ëŠ¥ íŒŒì¼)</option>
            </select>
        </div>
        <div class="form-group">
            <label class="form-label">Q. í˜„ì¬ ì›ê³ ëŠ” êµì •ì´ ì™„ë£Œë˜ì—ˆë‚˜ìš”?</label>
            <select id="status" name="status" class="form-select" onchange="showProofreadingInfo()">
                <option value="" selected disabled hidden>ì„ íƒí•´ì£¼ì„¸ìš”</option>
                <option value="ë„¤, ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ (ë¬´ë£Œ ê¸°ì´ˆ êµì • ì œê³µ)">ë„¤, ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ (ë¬´ë£Œ ê¸°ì´ˆ êµì • ì œê³µ)</option>
                <option value="ì•„ë‹ˆì˜¤, ì•„ì§ ì™„ë£Œì „ì…ë‹ˆë‹¤">ì•„ë‹ˆì˜¤, ì•„ì§ ì™„ë£Œì „ì…ë‹ˆë‹¤</option>
            </select>
            <div id="proofreadingInfo" style="display:none; margin-top:10px; padding:12px; background-color:var(--bg-color); border-radius:12px; box-shadow: inset 3px 3px 6px var(--shadow-dark), inset -3px -3px 6px var(--shadow-light); font-size:14px; line-height:1.5; color:var(--text-sub);">
                <strong>ğŸ” ë¬´ë£Œ ê¸°ì´ˆ êµì • ë²”ìœ„ ì•ˆë‚´</strong><br>
                ì˜¤íƒˆì, ë„ì–´ì“°ê¸°, ê¸°ë³¸ì ì¸ ë¬¸ë²• ì˜¤ë¥˜, ë¬¸ì¥ ë¶€í˜¸ ì˜¤ë¥˜ ë“± ë§ì¶¤ë²• ê²€ì‚¬ ìˆ˜ì¤€ì˜ êµì •ì„ ì§„í–‰í•©ë‹ˆë‹¤.<br>(ë¬¸ì¥ êµ¬ì¡° ë³€ê²½ì´ë‚˜ ìœ¤ë¬¸ì€ 'ì‹¬í™” êµì •' ì˜µì…˜ì— í•´ë‹¹í•©ë‹ˆë‹¤.)
            </div>
        </div>

        <div class="form-group">
            <label class="form-label">Q. ì‘ê°€ë‹˜ì˜ ì„±í•¨ì´ë‚˜ 'í•„ëª…'ì„ ì…ë ¥í•´ì£¼ì„¸ìš” (ì„ íƒì‚¬í•­)</label>
            <input type="text" id="authorName" name="author_name" class="form-input" placeholder="ì˜ˆ: í™ê¸¸ë™">
        </div>

        <div class="btn-area">
            <button type="button" class="btn-next" onclick="openTab('tab2')">ë‹¤ìŒ: ë””ìì¸ ì„ íƒ ğŸ‘‰</button>
        </div>
    </div>

    <!-- TAB 2: ë””ìì¸ -->
    <div id="tab2" class="tab-content">
        <div class="form-group">
            <label class="form-label">Q. ì–´ë–¤ ë¶„ìœ„ê¸°ì˜ ë””ìì¸ì„ ì›í•˜ì‹œë‚˜ìš”?</label>
            <select id="style" name="style" class="form-select" onchange="applyStyleColors()">
                <option value="ì‹¬í”Œ/ë¯¸ë‹ˆë©€">ì‹¬í”Œ & ë¯¸ë‹ˆë©€ (ê¹”ë”í•¨)</option>
                <option value="ë¹„ì¦ˆë‹ˆìŠ¤/ì‹ ë¢°">ë¹„ì¦ˆë‹ˆìŠ¤ & ì‹ ë¢° (ì „ë¬¸ì )</option>
                <option value="ê°ì„±/ì—ì„¸ì´">ê°ì„± & ì—ì„¸ì´ (ë”°ëœ»í•¨)</option>
                <option value="ì—´ì •/ìê¸°ê³„ë°œ">ì—´ì • & ìê¸°ê³„ë°œ (ì—ë„ˆì§€)</option>
                <option value="ìì—°/íë§">ìì—° & íë§ (í¸ì•ˆí•¨)</option>
            </select>
        </div>
        <div class="form-group">
            <label class="form-label">Q. ì±…ì— ì‚¬ìš©í•  í¬ì¸íŠ¸ ì»¬ëŸ¬ë¥¼ ê³¨ë¼ì£¼ì„¸ìš”</label>
            <p style="font-size:14px; color:var(--text-sub); margin-bottom:15px; line-height:1.5;">ì‘ê°€ë‹˜ì˜ ì±… ì†ì— <strong>ë‹¨ 1ê°œì˜ í¬ì¸íŠ¸ ìƒ‰ìƒë§Œ ë“¤ì–´ê°€ì•¼ í•œë‹¤ë©´</strong> ì–´ë–¤ ìƒ‰ì´ ë ê¹Œìš”?<br>ê°€ì¥ ì›í•˜ì‹œëŠ” ìƒ‰ìƒì„ 1ìˆœìœ„ë¡œ ê³¨ë¼ì£¼ì‹œë©´, ìƒí™©ì— ë”°ë¼ 2~3ìˆœìœ„ ìƒ‰ìƒë„ í•¨ê»˜ í™œìš©í•˜ì—¬ ë””ìì¸í•´ ë“œë¦½ë‹ˆë‹¤.</p>
            <div class="picker-item">
                <div class="picker-info">
                    <span class="picker-label">1ìˆœìœ„ (Main)</span>
                    <span class="picker-desc">ì œëª©/ë²ˆí˜¸ (í•µì‹¬ ìƒ‰ìƒ)</span>
                </div>
                <div style="text-align:center;">
                    <input type="color" id="mainColor" name="main_color" value="#212529" oninput="updatePreview()">
                    <div style="font-size:11px; color:var(--text-sub); margin-top:4px; font-weight:600;">ğŸ‘† í´ë¦­í•˜ì—¬ ë³€ê²½</div>
                </div>
            </div>
            <div class="picker-item">
                <div class="picker-info">
                    <span class="picker-label">2ìˆœìœ„ (Sub)</span>
                    <span class="picker-desc">ì•„ì´ì½˜/ì¥ì‹ (ë³´ì¡° ìƒ‰ìƒ)</span>
                </div>
                <div style="text-align:center;">
                    <input type="color" id="subColor" name="sub_color" value="#adb5bd" oninput="updatePreview()">
                    <div style="font-size:11px; color:var(--text-sub); margin-top:4px; font-weight:600;">ğŸ‘† í´ë¦­í•˜ì—¬ ë³€ê²½</div>
                </div>
            </div>
            <div class="picker-item">
                <div class="picker-info">
                    <span class="picker-label">3ìˆœìœ„ (Accent)</span>
                    <span class="picker-desc">ëª…ì–¸êµ¬ (ì„ íƒ ì‚¬í•­)</span>
                </div>
                <div style="text-align:center;">
                    <input type="color" id="accentColor" name="accent_color" value="#495057" oninput="updatePreview()">
                    <div style="font-size:11px; color:var(--text-sub); margin-top:4px; font-weight:600;">ğŸ‘† í´ë¦­í•˜ì—¬ ë³€ê²½</div>
                </div>
            </div>

            <p style="margin-top: 50px; margin-bottom: 10px; font-weight: 700; font-size: 14px; color:var(--text-main);">ğŸ‘€ ë¯¸ë¦¬ë³´ê¸° (Preview)</p>
            <div class="preview-box" id="previewBox" style="margin-top: 0; margin-bottom: 0;">
            <div class="chapter-num" id="prevNum">CHAPTER 01</div>
            <h2 class="chapter-title" id="prevTitle">ì„±ê³µí•˜ëŠ” ì‚¬ëŒë“¤ì˜<br>ì•„ì£¼ ì‘ì€ ìŠµê´€</h2>
            <div class="divider-line" id="prevLine"></div>
            <div class="point-icon" id="prevIcon">âœ¦</div>
            <div class="quote-text" id="prevQuote">"ìŠµê´€ì€ ë³µë¦¬ë¡œ ì‘ìš©í•œë‹¤."</div>
            <div class="body-text">
                ìš°ë¦¬ëŠ” í”íˆ ê±°ì°½í•œ ëª©í‘œë§Œì´ ì¸ìƒì„ ë°”ê¾¼ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì‹¤ì œë¡œ ì‚¶ì„ ë³€í™”ì‹œí‚¤ëŠ” ê²ƒì€ ë§¤ì¼ ë°˜ë³µë˜ëŠ” ì‚¬ì†Œí•œ í–‰ë™ë“¤ì…ë‹ˆë‹¤.
            </div>
        </div>
        </div>

        <div class="form-group">
            <label class="form-label">Q. ë””ìì¸ì‹œ ì°¸ê³ í•  ë§Œí•œ ì±…ì´ ìˆë‚˜ìš”? (í‘œì§€ì˜µì…˜ ì¶”ê°€ ê³ ê°ìš©)</label>
            <div class="store-links" style="display: block;">
                <div style="margin-bottom: 10px; font-size: 13px; color: var(--text-sub);">ğŸ” ì„œì ì—ì„œ ìŠ¤íƒ€ì¼ ì°¾ê¸°:</div>
                <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                    <a href="https://ebook.kyobobook.co.kr/" target="_blank" class="store-btn kyobo">êµë³´ë¬¸ê³ </a>
                    <a href="https://www.yes24.com/Mall/Main/Book/017" target="_blank" class="store-btn yes24">ì˜ˆìŠ¤24</a>
                    <a href="https://www.aladin.co.kr/home/webookmain.aspx" target="_blank" class="store-btn aladin">ì•Œë¼ë”˜</a>
                    <a href="https://ridibooks.com/" target="_blank" class="store-btn ridi">ë¦¬ë””ë¶ìŠ¤</a>
                </div>
            </div>
            <textarea id="ref" name="reference" class="form-textarea" placeholder="ì›í•˜ì‹œëŠ” ëŠë‚Œì˜ ì±… ì œëª©ì´ë‚˜ ë§í¬ê°€ ìˆë‹¤ë©´ ì ì–´ì£¼ì„¸ìš”."></textarea>
        </div>
        <div class="btn-area">
            <button type="button" class="btn-next" onclick="openTab('tab3')">ë‹¤ìŒ: ê²¬ì  í™•ì¸ ğŸ‘‰</button>
        </div>
    </div>

    <!-- TAB 3: ê²¬ì  í™•ì¸ -->
    <div id="tab3" class="tab-content">
        <div class="form-group">
            <label class="form-label">Q. ì›í•˜ì‹œëŠ” ì œì‘ ë“±ê¸‰ì„ ì„ íƒí•´ì£¼ì„¸ìš”</label>
            <p style="font-size:14px; color:var(--text-sub); margin-bottom:15px; line-height:1.5;">
                <strong>âˆ™ STANDARD:</strong> í…ìŠ¤íŠ¸ ìœ„ì£¼, ê°€ë…ì„± ìµœì í™”<br>
                <strong>âˆ™ DELUXE:</strong> ì´ë¯¸ì§€/ë°•ìŠ¤, íŒì—…/ì¸ë¼ì¸ ê°ì£¼, ì •ë³´ êµ¬ì¡°í™”<br>
                <strong>âˆ™ PREMIUM:</strong> ê³ ê¸‰ í¸ì§‘, ì¢…ì´ì±… ê°ì„±, ì†Œì¥ ê°€ì¹˜
            </p>
            <select id="serviceLevel" name="service_level" class="form-select" onchange="calculateTotal()" autocomplete="off">
                <option value="" selected disabled hidden>ì„ íƒí•´ì£¼ì„¸ìš”</option>
                <option value="STANDARD">STANDARD</option>
                <option value="DELUXE">DELUXE</option>
                <option value="PREMIUM">PREMIUM</option>
            </select>
            <div id="layoutNotice" style="display:none; margin-top:10px; padding:12px; background-color:var(--bg-color); border-radius:12px; box-shadow: inset 3px 3px 6px var(--shadow-dark), inset -3px -3px 6px var(--shadow-light); font-size:14px; line-height:1.5; color:var(--text-sub);">
                <strong>ğŸ“¢ ì´ë¯¸ì§€ ë°°ì¹˜ ìœ ì˜ì‚¬í•­</strong><br>
                E-book ì „ìì±… íŠ¹ì„±ìƒ ëª¨ë“  ì´ë¯¸ì§€ëŠ” <strong>ë¬¸ë‹¨ ì‚¬ì´(Block)</strong>ì— ë°°ì¹˜ë©ë‹ˆë‹¤.<br>
                (ê¸€ìê°€ ì´ë¯¸ì§€ë¥¼ ê°ì‹¸ëŠ” ì¡ì§€ì‹ ë ˆì´ì•„ì›ƒì€ ë·°ì–´ í˜¸í™˜ì„± ë¬¸ì œë¡œ êµ¬í˜„ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.)
            </div>
        </div>

        <div class="form-group">
            <label class="form-label">Q. ì›ê³  ë¶„ëŸ‰ì€ ì•½ ëª‡ í˜ì´ì§€ì¸ê°€ìš”? (A4 ê¸°ì¤€)</label>
            <input type="number" id="pageCount" name="page_count" class="form-input" value="50" min="10" oninput="calculateTotal()" onblur="if(this.value<10){this.value=10;calculateTotal();}">
            <div id="pageMsg" style="font-size:14px; margin-top:6px; font-weight:600;"></div>
            <span id="pageHelpText" style="font-size:14px; color:var(--text-sub); display:block; margin-top:4px;">* í…ìŠ¤íŠ¸ ìœ„ì£¼ì˜ A4 ì›ê³  ê¸°ì¤€ (ê¸°ë³¸ 50p, ëŒ€ëµ 75,000ì ë¶„ëŸ‰ ì œê³µ / ì´ˆê³¼ ì‹œ ì¥ë‹¹ 2,000ì›)</span>
        </div>
        
        <!-- Character Counter Tool -->
        <div class="form-group">
            <label class="form-label" style="color:var(--primary-color); margin-bottom:12px;">['ì¶”ê°€ê¸ˆì•¡'ì´ë‚˜ 'í• ì¸ê¸ˆì•¡' ë“± ì •í™•í•œ ê²¬ì ì‚°ì¶œì„ ì›í•˜ì‹œë©´ ì›ê³ ë¥¼ ë³µì‚¬ ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”.]</label>
            <div style="background: var(--bg-color); padding: 15px; border-radius: 12px; box-shadow: inset 3px 3px 6px var(--shadow-dark), inset -3px -3px 6px var(--shadow-light);">
                <div style="display:flex; justify-content:space-between; align-items:center; cursor:pointer;" onclick="toggleCounter()">
                    <span style="font-weight:700; font-size:16px; color:var(--text-main);">ğŸ§® ê¸€ì ìˆ˜ë¡œ í˜ì´ì§€ ê³„ì‚°ê¸° (í´ë¦­)</span>
                    <span style="font-size:16px; color:var(--text-sub);"><span id="counterArrow">â–¼</span> í¼ì¹˜ê¸°</span>
                </div>
                <div id="counterBox">
                    <textarea id="textSource" name="text_source" class="form-textarea" style="height:120px; margin-bottom:10px; margin-top:15px;" placeholder="ì—¬ê¸°ì— ì›ê³  ë‚´ìš©ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”. (ìë™ ê³„ì‚°ë¨)" oninput="countChars()"></textarea>
                    <div style="display:flex; gap: 15px; font-size:16px; color:var(--text-main); margin-bottom:10px; background:var(--bg-color); padding:10px; border-radius:6px; box-shadow: 3px 3px 6px var(--shadow-dark), -3px -3px 6px var(--shadow-light);">
                        <span>ê³µë°± í¬í•¨: <strong id="charCountWithSpace">0</strong>ì</span>
                        <span>ì˜ˆìƒ ë¶„ëŸ‰: ì•½ <strong id="estPages" style="color:var(--price-color);">0</strong>í˜ì´ì§€</span>
                    </div>
                    <button type="button" id="applyBtn" onclick="applyPageCount()" style="width:100%; padding:10px; background:var(--bg-color); color:var(--text-main); border:none; border-radius:6px; cursor:pointer; font-size:16px; font-weight:600; transition: all 0.3s; box-shadow: 3px 3px 6px var(--shadow-dark), -3px -3px 6px var(--shadow-light);">ğŸ‘† ì´ ë¶„ëŸ‰(í˜ì´ì§€)ìœ¼ë¡œ ì ìš©í•˜ê¸°</button>
                    <p style="font-size:15px; color:var(--text-sub); margin-top:8px;">* A4 1ì¥ë‹¹ ì•½ 1,500ì(ê³µë°± í¬í•¨) ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤.</p>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="form-label">Q. ì¶”ê°€ë¡œ í•„ìš”í•œ ì˜µì…˜ì´ ìˆìœ¼ì‹ ê°€ìš”?</label>
            <div class="checkbox-group">
                <label class="checkbox-card">
                    <div class="checkbox-row">
                        <input type="checkbox" id="optDeepEdit" name="opt_deep_edit" value="Yes" onchange="calculateTotal()">
                        <span id="txtOptDeep">âœï¸ ì‹¬í™” êµì • (ë¬¸ì¥ ë‹¤ë“¬ê¸°) (í˜ì´ì§€ë‹¹ +9,000ì›)</span>
                    </div>
                    <span class="checkbox-desc" id="descOptDeep">ë¹„ë¬¸ ìˆ˜ì • ë° ë¬¸ì¥ íë¦„ ê°œì„  (ë¦¬ë¼ì´íŒ… ì œì™¸)</span>
                </label>
                <label class="checkbox-card">
                    <div class="checkbox-row">
                        <input type="checkbox" id="optCover" name="opt_cover" value="Yes" onchange="calculateTotal()">
                        <span id="txtOptCover">ğŸ¨ í‘œì§€ ë””ìì¸ [ì‹¬í”Œí˜•] ì¶”ê°€ (+80,000ì›)</span>
                    </div>
                    <span class="checkbox-desc" id="descOptCover">ìƒì—…ìš© í°íŠ¸/ì´ë¯¸ì§€ í™œìš© íƒ€ì´í¬ê·¸ë˜í”¼ ì‘ì—…</span>
                </label>
                <label class="checkbox-card">
                    <div class="checkbox-row">
                        <input type="checkbox" id="optSource" name="opt_source" value="Yes" onchange="calculateTotal()">
                        <span id="txtOptSource">ğŸ“„ ì†Œì¥ìš©/ì¸ì‡„ìš© PDF ë³€í™˜ (+50,000ì›)</span>
                    </div>
                    <span class="checkbox-desc" id="descOptSource">í¸ì§‘/êµì •ì´ ì™„ë£Œëœ ìµœì¢… ì›ê³ ë¥¼ ê°€ë…ì„± ì¢‹ê²Œ ë³€í™˜ (ì €ì‘ê¶Œ ê±±ì • ì—†ëŠ” ë¬´ë£Œ í°íŠ¸ ì‚¬ìš©)</span>
                </label>
                <label class="checkbox-card">
                    <div class="checkbox-row">
                        <input type="checkbox" id="optOriginal" name="opt_original" value="Yes" onchange="calculateTotal()">
                        <span id="txtOptOriginal">ğŸ’¾ ì›ë³¸ ì†ŒìŠ¤(HTML/CSS) ì˜êµ¬ ì†Œì¥ (+100,000ì›)</span>
                    </div>
                    <span class="checkbox-desc" id="descOptOriginal">ì¬ê³  ê±±ì • ì—†ì´ í‰ìƒ íŒ”ë¦¬ëŠ” ì „ìì±…. ê°œì •íŒ, ì¦ë³´íŒ ë“± ì¬ë°œí–‰ì„ ìœ„í•œ ë§ˆìŠ¤í„°íŒŒì¼ ì œê³µ.</span>
                </label>
                <label class="checkbox-card">
                    <div class="checkbox-row">
                        <input type="checkbox" id="optFast" name="opt_fast" value="Yes" onchange="calculateTotal()">
                        <span id="txtOptFast">ğŸš€ ê¸‰í–‰ ì‘ì—… (ë¹„ìš© 1.5ë°°)</span>
                    </div>
                    <span class="checkbox-desc" id="descOptFast">ë‹¤ë¥¸ ì¼ì •ë³´ë‹¤ ìµœìš°ì„  ìˆœìœ„ë¡œ ë°°ì •í•˜ì—¬ ê°€ì¥ ë¹ ë¥´ê²Œ ì‘ì—…í•©ë‹ˆë‹¤. (ì•¼ê°„/ì£¼ë§ í¬í•¨)</span>
                </label>
            </div>
        </div>

        <div class="form-group" style="background: var(--bg-color); padding: 20px; border-radius: 12px; box-shadow: inset 3px 3px 6px var(--shadow-dark), inset -3px -3px 6px var(--shadow-light);">
            <label class="form-label" style="color:#f57f17;">âš ï¸ ì‘ì—… ì „ í•„ìˆ˜ í™•ì¸ì‚¬í•­ (ì²´í¬)</label>
            <div class="checkbox-group">
                <label class="checkbox-card" style="border:none; background:none; padding:5px 0; box-shadow:none;">
                    <div class="checkbox-row">
                        <input type="checkbox" id="chkEpubNature">
                        <span style="font-size:14px;">EPUBì€ ë””ìì¸ë³´ë‹¤ <strong>ê°€ë…ì„±ê³¼ ë…ì í¸ì˜ì„± ìœ„ì£¼</strong>ì˜ íŒŒì¼ì„ì„ ì´í•´í–ˆìŠµë‹ˆë‹¤.</span>
                    </div>
                </label>
                <label class="checkbox-card" style="border:none; background:none; padding:5px 0; box-shadow:none;">
                    <div class="checkbox-row">
                        <input type="checkbox" id="chkViewerDiff">
                        <span style="font-size:14px;">ì‚¬ìš©ìì˜ ë·°ì–´(ì•±) ì„¤ì •ì— ë”°ë¼ <strong>ë ˆì´ì•„ì›ƒ(ì¤„ë°”ê¿ˆ ë“±)ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŒ</strong>ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</span>
                    </div>
                </label>
                <label class="checkbox-card" style="border:none; background:none; padding:5px 0; box-shadow:none;">
                    <div class="checkbox-row">
                        <input type="checkbox" id="chkRevision">
                        <span style="font-size:14px;">ì‹œì•ˆ í™•ì • í›„ <strong>ì „ì²´ ë””ìì¸ ë³€ê²½ì´ë‚˜ ëŒ€ëŸ‰ì˜ ì›ê³  ìˆ˜ì •</strong>ì€ ì¶”ê°€ê¸ˆì´ ë°œìƒí•  ìˆ˜ ìˆìŒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</span>
                    </div>
                </label>
            </div>
        </div>

        <div class="quote-box">
            <div class="quote-row" style="border-bottom: 1px solid rgba(163, 177, 198, 0.3); padding-bottom: 15px; margin-bottom: 15px;">
                <span>ì±… ì œëª©</span>
                <span id="quoteTitleDisplay" style="font-weight: 700; color: var(--text-main);">(ë¯¸ì…ë ¥)</span>
            </div>
            <div class="quote-row">
                <span>ê¸°ë³¸ ì‘ì—…ë¹„</span>
                <span id="basePriceDisplay">0ì›</span>
            </div>
            <div class="quote-row">
                <span>í˜ì´ì§€ ì¡°ì • (ê¸°ë³¸ 50p ê¸°ì¤€)</span>
                <span id="pagePriceDisplay">0ì›</span>
            </div>
            <div class="quote-row">
                <span>ì‹¬í™” êµì • ì˜µì…˜</span>
                <span id="deepEditPriceDisplay">0ì›</span>
            </div>
            <div class="quote-row">
                <span>í‘œì§€ ë””ìì¸ [ì‹¬í”Œí˜•]</span>
                <span id="coverPriceDisplay">0ì›</span>
            </div>
            <div class="quote-row">
                <span>PDF ë³€í™˜ (ì†Œì¥ìš©)</span>
                <span id="optionPriceDisplay">0ì›</span>
            </div>
            <div class="quote-row">
                <span>ì›ë³¸ ì†ŒìŠ¤ ì œê³µ</span>
                <span id="originalPriceDisplay">0ì›</span>
            </div>
            <div class="quote-row" id="expressRow" style="display:none; color:var(--price-color); font-weight:700;">
                <span>âš¡ ê¸‰í–‰ë£Œ (1.5ë°° í• ì¦)</span>
                <span id="expressPriceDisplay">0ì›</span>
            </div>
            <div class="quote-total">
                <span>ì´ ì˜ˆìƒ ê²¬ì </span>
                <span class="total-price" id="totalPrice">0ì›</span>
            </div>
            <div class="quote-row" style="margin-top: 15px; padding-top: 15px; border-top: 1px dashed rgba(163, 177, 198, 0.3); color: var(--text-main);">
                <span style="font-weight: 700; font-size: 16px;">ğŸ“… ì˜ˆìƒ ì‘ì—… ê¸°ê°„</span>
                <span id="durationDisplay" style="font-weight: 700; color: var(--text-main); font-size: 16px;">ì•½ 0ì¼</span>
            </div>
            <p style="font-size:13px; color:var(--text-sub); margin-top:10px; text-align:right;">* ì‹¤ì œ ì‘ì—… ë‚œì´ë„ì— ë”°ë¼ í˜‘ì˜ í›„ ì¡°ì •ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        </div>

        <p style="text-align: center; margin-top: 50px; margin-bottom: 15px; font-size: 15px; font-weight: 600; color: var(--text-main);">
            ìœ„ì˜ ê²¬ì ë‚´ì—­ì„ ë‹¤ì‹œ í•œ ë²ˆ í™•ì¸í•´ì£¼ì„¸ìš”. ë‚´ìš©ì´ ë§ë‹¤ë©´ ì „ì†¡ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”. ğŸ‘‡
        </p>
        <div class="btn-area" style="margin-top: 0;">
            <button type="button" class="btn-submit" onclick="copyResult()">âœ… ê²¬ì ì„œ ë³µì‚¬ ë° ì „ì†¡í•˜ê¸°</button>
        </div>
    </div>
    </div>

    <div class="app-footer">
        &copy; 2026. All rights reserved.<br>ë³¸ ë„êµ¬ëŠ” ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ ìƒë‹´ ë° ê±°ë˜ ì „ìš©ì…ë‹ˆë‹¤.
    </div>
</div>

<!-- Modal -->
<div id="resultModal" class="modal-overlay">
    <div class="modal-box">
        <h3 style="margin:0 0 10px;">ê²¬ì ì„œ ë³µì‚¬ ì™„ë£Œ! ğŸ“‹</h3>
        <p style="font-size:14px; color:var(--text-sub); line-height: 1.6;">
            ê²¬ì  ë‚´ìš©ì´ í´ë¦½ë³´ë“œì— <strong>ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.</strong><br>
            ì´ì œ <strong>ë„¤ì´ë²„ í†¡í†¡</strong>ìœ¼ë¡œ ëŒì•„ê°€ì„œ<br>
            <strong>[ë¬¸ì˜í•˜ê¸°]</strong> ì°½ì— ë‚´ìš©ì„<br>
            <strong>ë¶™ì—¬ë„£ê³  ì „ì²´ ìµœì¢…ê²¬ì  ë‚´ìš©ì„ í™•ì¸ í›„ ì „ì†¡í•´ì£¼ì„¸ìš”.</strong>
        </p>
        <a href="https://http://talk.naver.com/W4QC0DB" target="_blank" class="modal-btn" style="display:block; text-decoration:none; box-sizing:border-box; text-align:center;" onclick="setTimeout(() => document.getElementById('resultModal').classList.remove('visible'), 300)">í™•ì¸ (ë„¤ì´ë²„ í†¡í†¡ìœ¼ë¡œ ì´ë™)</a>
    </div>
</div>

<script>
    // ğŸ’° [ê°€ê²©í‘œ ìˆ˜ì •í•˜ëŠ” ê³³]
    // êµ¬ê¸€ ì‹œíŠ¸ê°€ ê·€ì°®ìœ¼ì‹œë©´, ì•„ë˜ ìˆ«ìë“¤ì„ ì§ì ‘ ê³ ì³ì„œ ì“°ì‹œë©´ ë©ë‹ˆë‹¤! (ê°€ì¥ ë¹ ë¥´ê³  í™•ì‹¤í•œ ë°©ë²•)
    let PRICES = {
        STANDARD: 300000,  // í…ìŠ¤íŠ¸ ìœ„ì£¼ ê¸°ë³¸ê¸ˆ
        DELUXE: 420000,    // ì´ë¯¸ì§€/ë°•ìŠ¤ ìœ„ì£¼ ê¸°ë³¸ê¸ˆ
        PREMIUM: 600000,   // ë””ìì¸ ê°•í™” ê¸°ë³¸ê¸ˆ (í˜œíƒ ëª°ì•„ì£¼ê¸°)
        PAGE_UNIT: {       // ë“±ê¸‰ë³„ í˜ì´ì§€ ì¶”ê°€ê¸ˆ (ì°¨ë“± ì ìš©)
            STANDARD: 2000,
            DELUXE: 3000,
            PREMIUM: 4000
        },
        DEEP_EDIT_UNIT: 9000,// ì‹¬í™” êµì • ë¹„ìš© (í˜ì´ì§€ë‹¹)
        COVER_PRICE: 80000,// í‘œì§€ ë””ìì¸ ë¹„ìš©
        PDF_PRICE: 50000,  // PDF ë³€í™˜ ë¹„ìš©
        ORIGINAL_PRICE: 100000, // ì›ë³¸ ì†ŒìŠ¤ ì œê³µ ë¹„ìš©

        // ğŸ“ [í…ìŠ¤íŠ¸ ì„¤ì •] ì—‘ì…€ì—ì„œ ë¬¸êµ¬ë„ ìˆ˜ì • ê°€ëŠ¥í•˜ê²Œ ì¶”ê°€
        OPT_DEEP_NAME: "âœï¸ ì‹¬í™” êµì • (ë¬¸ì¥ ë‹¤ë“¬ê¸°)",
        OPT_DEEP_DESC: "ë¹„ë¬¸ ìˆ˜ì • ë° ë¬¸ì¥ íë¦„ ê°œì„  (ë¦¬ë¼ì´íŒ… ì œì™¸)",
        OPT_COVER_NAME: "ğŸ¨ í‘œì§€ ë””ìì¸ [ì‹¬í”Œí˜•] ì¶”ê°€",
        OPT_COVER_DESC: "ìƒì—…ìš© í°íŠ¸/ì´ë¯¸ì§€ í™œìš© íƒ€ì´í¬ê·¸ë˜í”¼ ì‘ì—…",
        OPT_FAST_NAME: "ğŸš€ ê¸‰í–‰ ì‘ì—…",
        OPT_FAST_DESC: "ë‹¤ë¥¸ ì¼ì •ë³´ë‹¤ ìµœìš°ì„  ìˆœìœ„ë¡œ ë°°ì •í•˜ì—¬ ê°€ì¥ ë¹ ë¥´ê²Œ ì‘ì—…í•©ë‹ˆë‹¤. (ì•¼ê°„/ì£¼ë§ í¬í•¨)",
        OPT_SOURCE_NAME: "ğŸ“„ ì†Œì¥ìš©/ì¸ì‡„ìš© PDF ë³€í™˜",
        OPT_SOURCE_DESC: "í¸ì§‘/êµì •ì´ ì™„ë£Œëœ ìµœì¢… ì›ê³ ë¥¼ ê°€ë…ì„± ì¢‹ê²Œ ë³€í™˜ (ì €ì‘ê¶Œ ê±±ì • ì—†ëŠ” ë¬´ë£Œ í°íŠ¸ ì‚¬ìš©)",
        OPT_ORIGINAL_NAME: "ğŸ’¾ ì›ë³¸ ì†ŒìŠ¤(HTML/CSS) ì˜êµ¬ ì†Œì¥",
        OPT_ORIGINAL_DESC: "ì¬ê³  ê±±ì • ì—†ì´ í‰ìƒ íŒ”ë¦¬ëŠ” ì „ìì±…. ê°œì •íŒ, ì¦ë³´íŒ ë“± ì¬ë°œí–‰ì„ ìœ„í•œ ë§ˆìŠ¤í„°íŒŒì¼ ì œê³µ."
    };

    // â˜ï¸ [êµ¬ê¸€ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ ì—°ë™] ì—‘ì…€ë¡œ ê°€ê²© ê´€ë¦¬í•˜ê¸°
    // ì‚¬ìš©ë²•: êµ¬ê¸€ ì‹œíŠ¸ì— ê°€ê²©í‘œë¥¼ ë§Œë“¤ê³  'ì›¹ì— ê²Œì‹œ(CSV)'í•œ ë§í¬ë¥¼ ì•„ë˜ì— ë„£ìœ¼ì„¸ìš”.
    // ë§í¬ê°€ ë¹„ì–´ìˆìœ¼ë©´ ìœ„ìª½ ê¸°ë³¸ ì„¤ì •(PRICES)ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. (ì•ˆ ì“°ì‹œë©´ ë¹„ì›Œë‘ì„¸ìš”)
    // const SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSIc2WJ5y72yLS9WzyIJzcLX-I02bRrO4IrCA-xM0n_jhGGolEA-6ubzoroB4YybiA1tkDksQxoxiIi/pub?gid=0&single=true&output=csv"; 
    const SHEET_URL = ""; // ğŸ‘ˆ ìˆ˜ì •í•  ë•ŒëŠ” ì´ë ‡ê²Œ ë¹„ì›Œë‘ì„¸ìš” (ë¡œì»¬ ëª¨ë“œ)

    async function loadPricesFromSheet() {
        console.log("ğŸ”„ êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™ ì‹œë„ ì¤‘..."); // [í™•ì¸ìš©] í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ëŠ”ì§€ ì²´í¬

        // ë§í¬ê°€ ì—†ê±°ë‚˜, ì•„ì§ "ì—¬ê¸°ì—..." ë¬¸êµ¬ê°€ ë‚¨ì•„ìˆìœ¼ë©´ ì‹¤í–‰í•˜ì§€ ì•ŠìŒ (ê¸°ë³¸ê°’ ì‚¬ìš©)
        if (!SHEET_URL || SHEET_URL.includes("ì—¬ê¸°ì—")) {
            console.log("â„¹ï¸ ì‹œíŠ¸ ë§í¬ê°€ ë¹„ì–´ìˆê±°ë‚˜ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. (ê¸°ë³¸ ê°€ê²©í‘œ ì‚¬ìš©)");
            return;
        }
        try {
            // [ìˆ˜ì •] ìºì‹œ ë°©ì§€ ê°•í™”: URL íŒŒë¼ë¯¸í„° + fetch ì˜µì…˜ ë™ì‹œ ì ìš©
            const timestamp = new Date().getTime();
            const noCacheUrl = SHEET_URL + (SHEET_URL.includes('?') ? '&' : '?') + 't=' + timestamp;
            
            const response = await fetch(noCacheUrl, { cache: 'no-store' });
            const text = await response.text();

            // [ì•ˆì „ì¥ì¹˜] CSVê°€ ì•„ë‹ˆë¼ ì¼ë°˜ ì›¹í˜ì´ì§€ ë§í¬ë¥¼ ë„£ì—ˆëŠ”ì§€ í™•ì¸
            if (text.includes("<!DOCTYPE html>") || text.includes("<html")) {
                console.error("ğŸš¨ ì˜¤ë¥˜: CSV ë§í¬ê°€ ì•„ë‹™ë‹ˆë‹¤! 'ì›¹ì— ê²Œì‹œ'ì—ì„œ 'ì‰¼í‘œë¡œ êµ¬ë¶„ëœ ê°’(.csv)'ì„ ì„ íƒí–ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.");
                return;
            }

            // [ìˆ˜ì •] CSV íŒŒì‹± ë¡œì§ ì—…ê·¸ë ˆì´ë“œ (ì‰¼í‘œ, ë”°ì˜´í‘œ, í…ìŠ¤íŠ¸ ì²˜ë¦¬ ê°•í™”)
            const rows = text.split('\n');
            
            rows.forEach(row => {
                // ì •ê·œì‹ìœ¼ë¡œ CSV íŒŒì‹± (ë”°ì˜´í‘œ ì•ˆì˜ ì‰¼í‘œëŠ” ìœ ì§€í•˜ê³ , ì»¬ëŸ¼ë§Œ ë‚˜ëˆ”)
                const parts = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                if (parts.length < 2) return;

                const cleanKey = parts[0].trim().replace(/^"|"$/g, '');   // Aì—´: í‚¤
                let cleanVal = parts[1].trim().replace(/^"|"$/g, '').replace(/""/g, '"'); // Bì—´: ê°’
                
                // í˜ì´ì§€ ë‹¨ê°€ ì²˜ë¦¬ (PAGE_UNIT_STANDARD ë“±)
                if (cleanKey.startsWith('PAGE_UNIT_')) {
                    const type = cleanKey.replace('PAGE_UNIT_', '');
                    const num = parseInt(cleanVal.replace(/[^0-9]/g, ''));
                    if (!isNaN(num) && PRICES.PAGE_UNIT[type] !== undefined) PRICES.PAGE_UNIT[type] = num;
                } else if (PRICES[cleanKey] !== undefined) {
                    // ê¸°ì¡´ ê°’ì´ ìˆ«ìë©´ ìˆ«ìë¡œ ë³€í™˜, ì•„ë‹ˆë©´ ë¬¸ìë¡œ ì €ì¥
                    if (typeof PRICES[cleanKey] === 'number') {
                        const num = parseInt(cleanVal.replace(/[^0-9]/g, ''));
                        if (!isNaN(num)) PRICES[cleanKey] = num;
                    } else {
                        PRICES[cleanKey] = cleanVal;
                    }
                }
            });
            console.log("âœ… êµ¬ê¸€ ì‹œíŠ¸ ê°€ê²©í‘œ ì ìš© ì™„ë£Œ");
            
            // [ì¶”ê°€] í™”ë©´ì˜ í…ìŠ¤íŠ¸ë„ ì—‘ì…€ ë‚´ìš©ìœ¼ë¡œ ì—…ë°ì´íŠ¸
            updateUITexts();
            calculateTotal(); // ê°€ê²© ê°±ì‹  í›„ ì¬ê³„ì‚°
        } catch (e) {
            console.log("âš ï¸ êµ¬ê¸€ ì‹œíŠ¸ ë¡œë”© ì‹¤íŒ¨ (ê¸°ë³¸ê°’ ì‚¬ìš©):", e);
        }
    }

    // [ìƒˆ ê¸°ëŠ¥] í™”ë©´ì˜ ì˜µì…˜ ì´ë¦„ê³¼ ì„¤ëª…ì„ ì—‘ì…€ ë°ì´í„°ë¡œ ë³€ê²½
    function updateUITexts() {
        // ì‹¬í™” êµì •
        document.getElementById('txtOptDeep').innerText = `${PRICES.OPT_DEEP_NAME} (í˜ì´ì§€ë‹¹ +${PRICES.DEEP_EDIT_UNIT.toLocaleString()}ì›)`;
        document.getElementById('descOptDeep').innerText = PRICES.OPT_DEEP_DESC;
        
        // í‘œì§€ ë””ìì¸
        document.getElementById('txtOptCover').innerText = `${PRICES.OPT_COVER_NAME} (+${PRICES.COVER_PRICE.toLocaleString()}ì›)`;
        document.getElementById('descOptCover').innerText = PRICES.OPT_COVER_DESC;
        
        // ê¸‰í–‰ ì‘ì—…
        document.getElementById('txtOptFast').innerText = `${PRICES.OPT_FAST_NAME} (ë¹„ìš© 1.5ë°°)`;
        document.getElementById('descOptFast').innerText = PRICES.OPT_FAST_DESC;
        
        // PDF ë³€í™˜
        document.getElementById('txtOptSource').innerText = `${PRICES.OPT_SOURCE_NAME} (+${PRICES.PDF_PRICE.toLocaleString()}ì›)`;
        document.getElementById('descOptSource').innerText = PRICES.OPT_SOURCE_DESC;

        // ì›ë³¸ ì†ŒìŠ¤ ì œê³µ
        document.getElementById('txtOptOriginal').innerText = `${PRICES.OPT_ORIGINAL_NAME} (+${PRICES.ORIGINAL_PRICE.toLocaleString()}ì›)`;
        document.getElementById('descOptOriginal').innerText = PRICES.OPT_ORIGINAL_DESC;
    }

    // ğŸ¨ [ìŠ¤íƒ€ì¼ë³„ ì¶”ì²œ ì»¬ëŸ¬ íŒ”ë ˆíŠ¸]
    const STYLE_PALETTES = {
        'ì‹¬í”Œ/ë¯¸ë‹ˆë©€': ['#212529', '#adb5bd', '#495057'],   // ëª¨ë…¸í†¤ (ë‹¤í¬ê·¸ë ˆì´/ë¼ì´íŠ¸ê·¸ë ˆì´)
        'ë¹„ì¦ˆë‹ˆìŠ¤/ì‹ ë¢°': ['#1565c0', '#90caf9', '#0d47a1'], // ë¸”ë£¨í†¤ (ì‹ ë¢°ê°)
        'ê°ì„±/ì—ì„¸ì´': ['#795548', '#d7ccc8', '#8d6e63'],   // ë¸Œë¼ìš´í†¤ (ë”°ëœ»í•¨)
        'ì—´ì •/ìê¸°ê³„ë°œ': ['#d84315', '#ffcc80', '#bf360c'], // ì˜¤ë Œì§€í†¤ (ì—ë„ˆì§€)
        'ìì—°/íë§': ['#2e7d32', '#c8e6c9', '#1b5e20']      // ê·¸ë¦°í†¤ (í¸ì•ˆí•¨)
    };

    function applyStyleColors() {
        const style = document.getElementById('style').value;
        const colors = STYLE_PALETTES[style];
        if (colors) {
            document.getElementById('mainColor').value = colors[0];
            document.getElementById('subColor').value = colors[1];
            document.getElementById('accentColor').value = colors[2];
            updatePreview(); // ë¯¸ë¦¬ë³´ê¸° ì¦‰ì‹œ ê°±ì‹ 
        }
    }

    function openTab(tabName) {
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(tabName).classList.add('active');
        
        // íƒ­ ë²„íŠ¼ ì°¾ê¸° ë° í™œì„±í™”
        const targetBtn = document.querySelector(`.tab-btn[data-tab="${tabName}"]`);
        if (targetBtn) {
            targetBtn.classList.add('active');
            moveTabLine(targetBtn);
        }
        
        // íƒ­ ì „í™˜ ì‹œ ë°ì´í„° ë™ê¸°í™”
        const title = document.getElementById('title').value;
        if (tabName === 'tab2') {
            // ë””ìì¸ íƒ­: ì œëª© ë¯¸ë¦¬ë³´ê¸°ì— ë°˜ì˜
            if(title.trim()) document.getElementById('prevTitle').innerText = title;
        } else if (tabName === 'tab3') {
            // ê²¬ì  íƒ­: ì œëª© ë° ê³„ì‚° ì—…ë°ì´íŠ¸
            calculateTotal();
        }
    }

    function toggleCounter() {
        const box = document.getElementById('counterBox');
        const arrow = document.getElementById('counterArrow');
        box.classList.toggle('active');
        arrow.classList.toggle('active');
    }

    function countChars() {
        const text = document.getElementById('textSource').value;
        const length = text.length;
        document.getElementById('charCountWithSpace').innerText = length.toLocaleString();
        
        // A4 1ì¥ = ì•½ 1500ì ê¸°ì¤€ (ì¼ë°˜ì ì¸ ë‹¨í–‰ë³¸ ì›ê³  ê¸°ì¤€)
        const estimated = Math.ceil(length / 1500);
        document.getElementById('estPages').innerText = estimated;

        // ë²„íŠ¼ í™œì„±í™” íš¨ê³¼ (ê¸€ìê°€ ì…ë ¥ë˜ë©´ ìƒ‰ìƒ ë³€ê²½)
        const btn = document.getElementById('applyBtn');
        if (length > 0) {
            btn.style.backgroundColor = '#6d5dfc'; // ë¸Œëœë“œ ì»¬ëŸ¬ë¡œ ë³€ê²½
            btn.style.boxShadow = '6px 6px 12px rgba(109, 93, 252, 0.4), -6px -6px 12px rgba(255, 255, 255, 0.8)';
            btn.innerText = `ğŸ‘† ì•½ ${estimated}í˜ì´ì§€ë¡œ ì ìš©í•˜ê¸° (í´ë¦­)`;
        } else {
            btn.style.backgroundColor = '#e4ebf5';
            btn.style.boxShadow = '6px 6px 12px #c8d0e7, -6px -6px 12px #ffffff';
            btn.innerText = 'ğŸ‘† ì´ ë¶„ëŸ‰(í˜ì´ì§€)ìœ¼ë¡œ ì ìš©í•˜ê¸°';
        }
    }

    function applyPageCount() {
        const est = document.getElementById('estPages').innerText;
        if(est == '0') return;
        document.getElementById('pageCount').value = est;
        calculateTotal();
        alert(`ì•½ ${est}í˜ì´ì§€ë¡œ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.`);
    }

    function showProofreadingInfo() {
        const status = document.getElementById('status').value;
        const infoBox = document.getElementById('proofreadingInfo');
        
        // ì…ë ¥ ì°¨ë‹¨ì„ ìœ„í•œ ë²„íŠ¼ ì„ íƒ
        const nextBtn = document.querySelector('#tab1 .btn-next');
        const tab2Btn = document.querySelector('.tab-btn[data-tab="tab2"]');
        const tab3Btn = document.querySelector('.tab-btn[data-tab="tab3"]');

        if (status.includes('ë„¤, ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤')) {
            infoBox.style.display = 'block';
            
            // ì§„í–‰ í—ˆìš© (ë²„íŠ¼ í™œì„±í™”)
            nextBtn.disabled = false;
            nextBtn.style.opacity = '1';
            nextBtn.style.cursor = 'pointer';
            nextBtn.innerText = "ë‹¤ìŒ: ë””ìì¸ ì„ íƒ ğŸ‘‰";
            
            tab2Btn.disabled = false;
            tab3Btn.disabled = false;
            tab2Btn.style.opacity = '1';
            tab3Btn.style.opacity = '1';
            tab2Btn.style.cursor = 'pointer';
            tab3Btn.style.cursor = 'pointer';
        } else {
            infoBox.style.display = 'none';
            if (status === 'ì•„ë‹ˆì˜¤, ì•„ì§ ì™„ë£Œì „ì…ë‹ˆë‹¤') {
                alert('êµì • ì™„ë£Œì‹œ ë‹¤ì‹œ ë¬¸ì˜ ë¶€íƒë“œë¦½ë‹ˆë‹¤.');
                
                // ì§„í–‰ ì°¨ë‹¨ (ë²„íŠ¼ ë¹„í™œì„±í™”)
                nextBtn.disabled = true;
                nextBtn.style.opacity = '0.3';
                nextBtn.style.cursor = 'not-allowed';
                nextBtn.innerText = "â›” êµì • ì™„ë£Œ í›„ ì§„í–‰ ê°€ëŠ¥í•©ë‹ˆë‹¤";
                
                tab2Btn.disabled = true;
                tab3Btn.disabled = true;
                tab2Btn.style.opacity = '0.5';
                tab3Btn.style.opacity = '0.5';
                tab2Btn.style.cursor = 'not-allowed';
                tab3Btn.style.cursor = 'not-allowed';
            }
        }
    }

    function moveTabLine(btn) {
        const line = document.querySelector('.tab-line');
        if (line && btn) {
            line.style.width = btn.offsetWidth + 'px';
            line.style.left = btn.offsetLeft + 'px';
        }
    }

    function updatePreview() {
        const main = document.getElementById('mainColor').value;
        const sub = document.getElementById('subColor').value;
        const accent = document.getElementById('accentColor').value;

        document.getElementById('prevNum').style.color = main;
        document.getElementById('prevTitle').style.color = main;
        document.getElementById('prevLine').style.backgroundColor = sub;
        document.getElementById('prevIcon').style.color = sub;
        document.getElementById('prevQuote').style.color = accent;
    }

    function calculateTotal() {
        const level = document.getElementById('serviceLevel').value;
        
        // [ìˆ˜ì •] ë“±ê¸‰ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ 0ì›ìœ¼ë¡œ ì´ˆê¸°í™”
        if (!level) {
            // ê°€ê²© ê´€ë ¨ í•„ë“œë§Œ 0ìœ¼ë¡œ ë¦¬ì…‹
            document.getElementById('basePriceDisplay').innerText = '0ì›';
            document.getElementById('pagePriceDisplay').innerText = '0ì›';
            document.getElementById('pagePriceDisplay').style.color = '#333';
            document.getElementById('deepEditPriceDisplay').innerText = '0ì›';
            document.getElementById('coverPriceDisplay').innerText = '0ì›';
            document.getElementById('optionPriceDisplay').innerText = '0ì›';
            document.getElementById('expressRow').style.display = 'none';
            document.getElementById('originalPriceDisplay').innerText = '0ì›';
            document.getElementById('totalPrice').innerText = '0ì›';
            document.getElementById('durationDisplay').innerText = 'ì•½ 0ì¼';

            // í˜ì´ì§€ ê³„ì‚°ì€ ê³„ì† ìˆ˜í–‰
            const pages = parseInt(document.getElementById('pageCount').value) || 0;
            const calcPages = (pages < 10) ? 10 : pages; // ìµœì†Œ 10í˜ì´ì§€ë¡œ ê³„ì‚° ê³ ì •
            const diffPages = calcPages - 50;

            const msgBox = document.getElementById('pageMsg');
            if (pages < 10) {
                msgBox.innerHTML = `<span style='color:#d32f2f;'>âš ï¸ ì „ìì±… ì œì‘ ìµœì†Œ ë¶„ëŸ‰ì€ 10í˜ì´ì§€ ì´ìƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.</span>`;
            } else if (diffPages > 0) {
                msgBox.innerHTML = `<span style='color:#d32f2f;'>âš ï¸ ê¸°ë³¸ 50p ì´ˆê³¼! (${diffPages}ì¥ ì¶”ê°€)</span>`;
            } else if (diffPages < 0) {
                msgBox.innerHTML = `<span style='color:#1565c0;'>ğŸ“‰ ê¸°ë³¸ 50p ë¯¸ë§Œ! (${Math.abs(diffPages)}ì¥ í• ì¸ ëŒ€ìƒ)</span>`;
            } else {
                msgBox.innerHTML = "<span style='color:#28a745;'>âœ… ê¸°ë³¸ ì œê³µ ë²”ìœ„ ë‚´ì…ë‹ˆë‹¤.</span>";
            }
            
            // ë¼ë²¨ ì´ˆê¸°í™”
            const quoteRowLabel = document.getElementById('pagePriceDisplay').previousElementSibling;
            quoteRowLabel.innerText = "í˜ì´ì§€ ì¡°ì • (ê¸°ë³¸ 50p ê¸°ì¤€)";

            return 0;
        }

        const pages = parseInt(document.getElementById('pageCount').value) || 0;
        const isDeepEdit = document.getElementById('optDeepEdit').checked;
        const isCover = document.getElementById('optCover').checked;
        const isFast = document.getElementById('optFast').checked;
        const isSource = document.getElementById('optSource').checked;
        const isOriginal = document.getElementById('optOriginal').checked;

        // ì±… ì œëª© ì—…ë°ì´íŠ¸
        const title = document.getElementById('title').value;
        document.getElementById('quoteTitleDisplay').innerText = title || '(ë¯¸ì…ë ¥)';

        // ì´ë¯¸ì§€ ë°°ì¹˜ ì•ˆë‚´ ë¬¸êµ¬ í‘œì‹œ (STANDARDê°€ ì•„ë‹ ë•Œ)
        const notice = document.getElementById('layoutNotice');
        if (level === 'STANDARD') {
            notice.style.display = 'none';
        } else {
            notice.style.display = 'block';
        }

        // 1. ê¸°ë³¸ê¸ˆ
        let base = PRICES[level];
        
        // 2. í˜ì´ì§€ ì¶”ê°€/í• ì¸ ê³„ì‚° (ë“±ê¸‰ë³„ ë‹¨ê°€ ì ìš©)
        let unitPrice = PRICES.PAGE_UNIT[level];
        let calcPages = (pages < 10) ? 10 : pages; // ìµœì†Œ 10í˜ì´ì§€ë¡œ ê³„ì‚° ê³ ì •
        let diffPages = calcPages - 50;
        let pageCost = diffPages * unitPrice;

        // ì•ˆë‚´ ë¬¸êµ¬ ì—…ë°ì´íŠ¸
        document.getElementById('pageHelpText').innerText = `* A4 ì›ê³  ê¸°ì¤€ (ê¸°ë³¸ 50p, ëŒ€ëµ 75,000ì ë¶„ëŸ‰ ì œê³µ / ${level} ë“±ê¸‰ ì¦ê° ì¥ë‹¹ ${unitPrice.toLocaleString()}ì›)`;

        // í˜ì´ì§€ ìˆ˜ ì•ˆë‚´ ë©”ì‹œì§€ & ê²¬ì ì„œ ë¼ë²¨ í‘œì‹œ
        const msgBox = document.getElementById('pageMsg');
        const quoteRowLabel = document.getElementById('pagePriceDisplay').previousElementSibling;
        const quotePriceDisplay = document.getElementById('pagePriceDisplay');

        if (diffPages > 0) {
            // ì¶”ê°€ê¸ˆ
            msgBox.innerHTML = `<span style='color:#d32f2f;'>âš ï¸ ê¸°ë³¸ 50p ì´ˆê³¼! (+${diffPages}ì¥ x ${unitPrice.toLocaleString()}ì›)</span>`;
            quoteRowLabel.innerText = `í˜ì´ì§€ ì¶”ê°€ê¸ˆ (ê¸°ë³¸ 50p ì´ˆê³¼ ${diffPages}p)`;
            quotePriceDisplay.style.color = '#d32f2f';
            quotePriceDisplay.innerText = '+' + pageCost.toLocaleString() + 'ì›';
        } else if (diffPages < 0) {
            // í• ì¸
            let discountPages = Math.abs(diffPages);
            let discountAmount = Math.abs(pageCost);
            
            // [ìˆ˜ì •] ê³„ì‚° ë©”ì‹œì§€ ìš°ì„  í‘œì‹œ (ê²½ê³ ëŠ” ë’¤ì— ë§ë¶™ì„)
            let msgHtml = `<span style='color:#1565c0; font-weight:700;'>ğŸ“‰ ê¸°ë³¸ 50p ë¯¸ë§Œ! (-${discountPages}ì¥ x ${unitPrice.toLocaleString()}ì› í• ì¸)</span>`;
            
            if (pages < 10) {
                msgHtml += ` <span style='color:#d32f2f; font-size:13px;'>(âš ï¸ ìµœì†Œ 10p ê¶Œì¥)</span>`;
            }
            msgBox.innerHTML = msgHtml;
            
            quoteRowLabel.innerText = `í˜ì´ì§€ í• ì¸ (ê¸°ë³¸ 50p ë¯¸ë§Œ ${discountPages}p)`;
            quotePriceDisplay.style.color = '#1565c0';
            quotePriceDisplay.innerText = '-' + discountAmount.toLocaleString() + 'ì›';
        } else {
            // ë³€ë™ ì—†ìŒ
            msgBox.innerHTML = "<span style='color:#28a745;'>âœ… ê¸°ë³¸ ì œê³µ ë²”ìœ„ ë‚´ì…ë‹ˆë‹¤. (ë³€ë™ ì—†ìŒ)</span>";
            quoteRowLabel.innerText = `í˜ì´ì§€ ì¡°ì • (ê¸°ë³¸ 50p ê¸°ì¤€)`;
            quotePriceDisplay.style.color = '#333';
            quotePriceDisplay.innerText = '0ì›';
        }

        // 3. êµì • ì˜µì…˜ ë¹„ìš©
        let deepEditCost = isDeepEdit ? (pages * PRICES.DEEP_EDIT_UNIT) : 0;

        // 4. í‘œì§€ ë¹„ìš©
        let coverCost = isCover ? PRICES.COVER_PRICE : 0;

        // 5. ê¸°íƒ€ ì˜µì…˜ ë¹„ìš©
        let pdfCost = isSource ? PRICES.PDF_PRICE : 0;

        // 6. ì›ë³¸ ì†ŒìŠ¤ ë¹„ìš©
        let originalCost = isOriginal ? PRICES.ORIGINAL_PRICE : 0;

        // 7. í•©ê³„ ë° ê¸‰í–‰ í• ì¦ ê³„ì‚°
        let preTotal = base + pageCost + deepEditCost + coverCost + pdfCost + originalCost;
        let expressFee = 0;
        if (isFast) {
            expressFee = Math.round(preTotal * 0.5);
        }
        let finalTotal = preTotal + expressFee;

        // í™”ë©´ í‘œì‹œ
        document.getElementById('basePriceDisplay').innerText = base.toLocaleString() + 'ì›';
        document.getElementById('deepEditPriceDisplay').innerText = deepEditCost.toLocaleString() + 'ì›';
        document.getElementById('coverPriceDisplay').innerText = coverCost.toLocaleString() + 'ì›';
        
        // PDF ì˜µì…˜ í‘œì‹œ
        document.getElementById('optionPriceDisplay').innerText = pdfCost.toLocaleString() + 'ì›';

        // ì›ë³¸ ì†ŒìŠ¤ í‘œì‹œ
        document.getElementById('originalPriceDisplay').innerText = originalCost.toLocaleString() + 'ì›';
        
        // ê¸‰í–‰ë£Œ ë³„ë„ í‘œì‹œ
        const expressRow = document.getElementById('expressRow');
        if (isFast) {
            expressRow.style.display = 'flex';
            document.getElementById('expressPriceDisplay').innerText = expressFee.toLocaleString() + 'ì›';
        } else {
            expressRow.style.display = 'none';
        }

        document.getElementById('totalPrice').innerText = finalTotal.toLocaleString() + 'ì›';

        // ğŸ“… [ê¸°ê°„ ê³„ì‚° ë¡œì§]
        // 1. ê¸°ë³¸ ì œì‘ ê¸°ê°„ (ë“±ê¸‰ë³„ ê¸°ë³¸ì¼ + 50í˜ì´ì§€ ì´ˆê³¼ ì‹œ 25í˜ì´ì§€ë‹¹ 1ì¼ ì¶”ê°€)
        let baseDays = 3; // STANDARD
        if (level === 'DELUXE') baseDays = 5;
        if (level === 'PREMIUM') baseDays = 7;
        
        // ê¸°ë³¸ 50í˜ì´ì§€ê¹Œì§€ëŠ” ì¶”ê°€ ê¸°ê°„ ì—†ìŒ. ì´ˆê³¼ë¶„ì— ëŒ€í•´ì„œë§Œ ê³„ì‚°.
        let extraDays = 0;
        if (pages > 50) {
            extraDays = Math.ceil((pages - 50) / 25);
        }
        
        let days = baseDays + extraDays;
        
        // 2. ì‹¬í™” êµì •: 20í˜ì´ì§€ë‹¹ 1ì¼ ì¶”ê°€ (ìˆ˜ì‹­ ë²ˆ ë°˜ë³µ ê²€ìˆ˜ í•„ìš”)
        if (isDeepEdit) days += Math.ceil(pages / 20);
        
        // 3. í‘œì§€ ë””ìì¸: 2ì¼ ì¶”ê°€ (ë‹¨ê°€ 10ë§Œì› ë°˜ì˜, ì‹œì•ˆ ì‘ì—… ì‹œê°„ í™•ë³´)
        if (isCover) days += 2;

        // 4. ê¸‰í–‰ ì˜µì…˜: ê¸°ê°„ 30% ë‹¨ì¶• (ë„ˆë¬´ íŒ ì¤„ì§€ ì•Šê²Œ ì¡°ì •)
        if (isFast) {
            days = Math.ceil(days * 0.7);
            if (days < 2) days = 2;
        }

        document.getElementById('durationDisplay').innerText = `ì•½ ${days}ì¼`;

        return finalTotal; // ì „ì†¡ìš© ë°˜í™˜
    }

    function copyResult() {
        // í•„ìˆ˜ ì²´í¬ë°•ìŠ¤ í™•ì¸
        if (!document.getElementById('chkEpubNature').checked || 
            !document.getElementById('chkViewerDiff').checked || 
            !document.getElementById('chkRevision').checked) {
            alert("âš ï¸ [ì‘ì—… ì „ í•„ìˆ˜ í™•ì¸ì‚¬í•­]ì— ëª¨ë‘ ì²´í¬í•´ì£¼ì…”ì•¼ ê²¬ì ì„œ ì „ì†¡ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
            return;
        }

        // 1. [êµ¬ê¸€ ì‹œíŠ¸ ì „ì†¡] - ìœ„ì—ì„œ ìƒˆë¡œ ë§Œë“  ì•± ìŠ¤í¬ë¦½íŠ¸ URLì„ ì—¬ê¸°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.
        const scriptURL = "https://script.google.com/macros/s/AKfycbysP-57mIE_PXt_GEE7T-8Z8DyjiAma3XsfUTGfA_GTUrVJLrCcZVkQirHC0j4PP_GrFw/exec"; 

        const title = document.getElementById('title').value || '(ë¯¸ì…ë ¥)';
        const authorName = document.getElementById('authorName').value || '(ë¯¸ì…ë ¥)';
        const category = document.getElementById('category').value || '(ë¯¸ì„ íƒ)';
        const manuscriptType = document.getElementById('manuscriptType').value || '(ë¯¸ì„ íƒ)';
        const status = document.getElementById('status').value || '(ë¯¸ì„ íƒ)';
        const pages = document.getElementById('pageCount').value;
        const style = document.getElementById('style').value;
        const mainColor = document.getElementById('mainColor').value;
        const subColor = document.getElementById('subColor').value;
        const accentColor = document.getElementById('accentColor').value;
        const ref = document.getElementById('ref').value || '(ì—†ìŒ)';
        
        const level = document.getElementById('serviceLevel').value;
        const total = document.getElementById('totalPrice').innerText;
        const duration = document.getElementById('durationDisplay').innerText;
        
        const opts = [];
        if(document.getElementById('optDeepEdit').checked) opts.push("âœï¸ ì‹¬í™” êµì • ì¶”ê°€");
        if(document.getElementById('optCover').checked) opts.push("ğŸ¨ í‘œì§€ ë””ìì¸ [ì‹¬í”Œí˜•] ì¶”ê°€");
        if(document.getElementById('optSource').checked) opts.push("ğŸ“„ PDF ë³€í™˜ ì¶”ê°€");
        if(document.getElementById('optOriginal').checked) opts.push("ğŸ’¾ ì›ë³¸ ì†ŒìŠ¤ ì œê³µ");
        if(document.getElementById('optFast').checked) opts.push("ğŸš€ ê¸‰í–‰ ì‘ì—…");
        const optText = opts.length > 0 ? opts.join(', ') : 'ì—†ìŒ';

        const clipboardText = `ğŸ“‹ [EPUB ì œì‘ ì˜ë¢° ë° ìë™ê²¬ì ì„œ]

1ï¸âƒ£ ì±… ì •ë³´
- ì œëª©: ${title}
- ì €ìëª…: ${authorName}
- ì¹´í…Œê³ ë¦¬: ${category}
- ì›ê³  ì¢…ë¥˜: ${manuscriptType}
- ìƒíƒœ: ${status}
- ë¶„ëŸ‰: ${pages}í˜ì´ì§€

2ï¸âƒ£ ë””ìì¸
- ìŠ¤íƒ€ì¼: ${style}
- ì»¬ëŸ¬(1/2/3ìˆœìœ„): ${mainColor} / ${subColor} / ${accentColor}
- ë ˆí¼ëŸ°ìŠ¤: ${ref}

3ï¸âƒ£ ê²¬ì  í™•ì¸
- ë“±ê¸‰: ${level}
- ì¶”ê°€ ì˜µì…˜: ${optText}
ğŸ’° ì˜ˆìƒ ê²¬ì : ${total}
ğŸ“… ì˜ˆìƒ ê¸°ê°„: ${duration}

ìœ„ì˜ ê²¬ì ë‚´ì—­ì„ ë‹¤ì‹œ í•œ ë²ˆ í™•ì¸í•´ì£¼ì„¸ìš”. ë‚´ìš©ì´ ë§ë‹¤ë©´ ì „ì†¡ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.

ì¶”ê°€ ë¬¸ì˜ì‚¬í•­: _________________`;

        // 2. [ì‹œíŠ¸ë¡œ ë³´ë‚¼ ë°ì´í„° ì •ë¦¬]
        const params = new URLSearchParams();
        params.append('title', title);
        params.append('authorName', authorName);
        params.append('category', category);
        params.append('manuscriptType', manuscriptType);
        params.append('status', status);
        params.append('pages', pages);
        params.append('style', style);
        params.append('colors', `${mainColor} / ${subColor} / ${accentColor}`); // ìƒ‰ìƒ ì •ë³´ í•©ì¹˜ê¸°
        params.append('ref', ref);
        params.append('level', level);
        params.append('optText', optText);
        params.append('total', total);
        params.append('duration', duration);

        // 3. [ì‹œíŠ¸ë¡œ ë°ì´í„° ì „ì†¡ ì‹¤í–‰]
        if (scriptURL && !scriptURL.includes("ì—¬ê¸°ì—")) {
            fetch(scriptURL, { method: 'POST', mode: 'no-cors', body: params })
                .then(() => console.log("âœ… Ebook ê²¬ì  ì‹œíŠ¸ ì €ì¥ ì™„ë£Œ!"))
                .catch(e => console.error("âŒ Ebook ì‹œíŠ¸ ì „ì†¡ ì‹¤íŒ¨:", e));
        }

        // 4. [í´ë¦½ë³´ë“œ ë³µì‚¬ ë° ëª¨ë‹¬ í‘œì‹œ]
        navigator.clipboard.writeText(clipboardText).then(() => {
            document.getElementById('resultModal').classList.add('visible');
        }).catch(err => {
            alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‚´ìš©ì„ ì§ì ‘ ë³µì‚¬í•´ì£¼ì„¸ìš”.');
        });
    }
    
    // [UI ê°œì„ ] ë“œë¡­ë‹¤ìš´ ì„ íƒ ì‹œ ìƒ‰ìƒ ë³€ê²½ ê¸°ëŠ¥
    function initSelectHighlight() {
        const selects = document.querySelectorAll('.form-select');
        selects.forEach(select => {
            // ì´ˆê¸° ìƒíƒœ í™•ì¸ (ì´ë¯¸ ì„ íƒëœ ê°’ì´ ìˆìœ¼ë©´ ê°•ì¡°)
            if (select.value) select.classList.add('is-selected');

            select.addEventListener('change', function() {
                if (this.value) this.classList.add('is-selected');
                else this.classList.remove('is-selected');
            });
        });
    }

    // ì´ˆê¸°í™”
    window.addEventListener('load', () => {
        const activeBtn = document.querySelector('.tab-btn.active');
        moveTabLine(activeBtn);
        updatePreview();
        showProofreadingInfo(); // ì´ˆê¸° ìƒíƒœ ë°˜ì˜
        loadPricesFromSheet();  // êµ¬ê¸€ ì‹œíŠ¸ ê°€ê²© ë¶ˆëŸ¬ì˜¤ê¸°
        calculateTotal();
        initSelectHighlight(); // ë“œë¡­ë‹¤ìš´ í•˜ì´ë¼ì´íŠ¸ ê¸°ëŠ¥ í™œì„±í™”
    });

    // ì°½ í¬ê¸° ë³€ê²½ ì‹œ ë¼ì¸ ìœ„ì¹˜ ì¬ì¡°ì •
    window.addEventListener('resize', () => {
        const activeBtn = document.querySelector('.tab-btn.active');
        moveTabLine(activeBtn);
    });
</script>

</body>
</html>

